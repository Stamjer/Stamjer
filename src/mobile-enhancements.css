/* Mobile-First Additional Enhancements */

/* Prevent text size adjustments on orientation change */
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Better scrolling on mobile */
* {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Remove default tap highlights */
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* Improve form controls on mobile */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
textarea,
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: 0; /* Reset iOS rounded corners */
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {
  /* This targets iOS Safari */
  
  /* Fix viewport issues */
  body {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Prevent zoom on input focus */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  textarea,
  select {
    font-size: 16px; /* Prevents zoom */
  }
  
  /* Fix sticky positioning */
  .nav-container {
    position: -webkit-sticky;
    position: sticky;
  }
}

/* Android specific fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  /* This targets Android browsers */
  
  /* Improve button appearance */
  button,
  .btn {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: var(--radius-lg);
  }
  
  /* Fix select dropdown appearance */
  select {
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23667eea' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 0.75rem;
    padding-right: 2.5rem;
  }
}

/* Responsive images */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Responsive tables - scroll horizontally on mobile */
.table-responsive {
  display: block;
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.table-responsive table {
  min-width: 100%;
  white-space: nowrap;
}

/* Mobile navigation enhancements */
@media (max-width: 768px) {
  /* Ensure navigation is accessible */
  .nav-container {
    min-height: 60px;
  }
  
  /* Improve button spacing in navigation */
  .nav-menu button {
    margin: 0.25rem 0;
  }
  
  /* Better modal sizing */
  .modal {
    width: 95vw;
    max-width: 95vw;
    margin: 1rem auto;
  }
  
  /* Improve form layouts */
  .form-grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  
  /* Better card spacing */
  .card {
    margin-bottom: 1rem;
  }
  
  /* Improve list item spacing */
  li {
    margin-bottom: 0.5rem;
  }
  
  /* Better button groups */
  .button-group {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .button-group button {
    width: 100%;
  }
}

/* Small mobile specific */
@media (max-width: 480px) {
  /* Reduce margins and padding */
  .container {
    padding: 0.75rem;
  }
  
  /* Stack elements vertically */
  .flex-row {
    flex-direction: column;
  }
  
  /* Full width elements */
  .btn,
  button,
  input,
  select,
  textarea {
    width: 100%;
    box-sizing: border-box;
  }
  
  /* Smaller text for constraints */
  small,
  .text-small {
    font-size: 0.75rem;
  }
  
  /* Better spacing for forms */
  .form-group + .form-group {
    margin-top: 1rem;
  }
  
  /* Better form layouts */
  .form-group {
    margin-bottom: 1rem !important;
  }
  
  .form-group label {
    font-size: 0.875rem !important;
    color: #374151 !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
  }
}

/* Extra small mobile */
@media (max-width: 360px) {
  /* Even tighter spacing */
  .container {
    padding: 0.5rem;
  }
  
  /* Smaller font sizes */
  body {
    font-size: 0.875rem;
  }
  
  h1 {
    font-size: 1.5rem;
  }
  
  h2 {
    font-size: 1.25rem;
  }
  
  h3 {
    font-size: 1.125rem;
  }
  
  /* Reduce button padding */
  .btn {
    padding: 0.5rem 0.75rem !important;
    font-size: 0.8125rem !important;
    min-height: 40px !important;
  }
}

/* Landscape orientation adjustments */
@media (orientation: landscape) and (max-height: 600px) {
  /* Reduce header size in landscape */
  .page-header {
    margin-bottom: 1rem;
  }
  
  .page-title {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }
  
  /* Compact navigation */
  .nav-container {
    min-height: 50px;
    padding: 0.5rem 1rem;
  }
  
  /* Reduce modal header */
  .modal-header {
    padding: 0.75rem 1rem;
  }
  
  .modal-body {
    padding: 0.75rem 1rem;
  }
}

/* High DPI displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Crisp borders */
  .btn,
  .card,
  input,
  select,
  textarea {
    border-width: 0.5px;
  }
  
  /* Better shadows */
  .card {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
}

/* Force light mode on mobile - no dark mode support */
@media (max-width: 768px) {
  /* Override any dark mode styles and force light mode */
  * {
    color-scheme: light !important;
  }
  
  body {
    background: white !important;
    color: #1e293b !important;
  }
  
  .nav-container {
    background: rgba(255, 255, 255, 0.95) !important;
    border-bottom-color: #e2e8f0 !important;
    color: #1e293b !important;
  }
  
  .card {
    background: white !important;
    border-color: #e2e8f0 !important;
    color: #1e293b !important;
  }
  
  .modal {
    background: white !important;
    color: #1e293b !important;
  }
  
  input,
  textarea,
  select {
    background: white !important;
    border-color: #e2e8f0 !important;
    color: #1e293b !important;
  }
  
  /* Force light mode for any other elements */
  .auth-container,
  .calendar-container,
  .page-container {
    background: linear-gradient(135deg, #f8fafc 0%, #eff6ff 100%) !important;
    color: #1e293b !important;
  }
}

/* Comprehensive mobile optimizations */
@media (max-width: 768px) {
  /* Global light mode enforcement */
  *,
  *::before,
  *::after {
    color-scheme: light !important;
  }
  
  /* Prevent horizontal scrolling */
  body {
    overflow-x: hidden !important;
    background: white !important;
    color: #1e293b !important;
  }
  
  /* Improve viewport handling */
  html {
    -webkit-text-size-adjust: 100% !important;
    text-size-adjust: 100% !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Enhanced touch targets */
  button,
  input,
  textarea,
  select,
  a {
    min-height: 44px !important;
    touch-action: manipulation !important;
  }
  
  /* Prevent zoom on input focus */
  input[type="email"],
  input[type="password"], 
  input[type="text"],
  textarea {
    font-size: 16px !important; /* Prevents iOS zoom */
    -webkit-appearance: none !important;
    appearance: none !important;
  }
  
  /* Improve button interactions */
  button {
    -webkit-tap-highlight-color: transparent !important;
    user-select: none !important;
  }
  
  /* Better focus states for accessibility */
  *:focus {
    outline: 2px solid #3b82f6 !important;
    outline-offset: 2px !important;
  }
  
  /* Remove default webkit styles that can cause issues */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  textarea,
  select {
    -webkit-appearance: none !important;
    appearance: none !important;
    border-radius: 0 !important;
  }
  
  /* Enhance clickable areas */
  .nav-btn,
  .btn,
  button {
    position: relative !important;
    overflow: hidden !important;
  }
  
  /* Add ripple effect for better feedback */
  .nav-btn:active,
  .btn:active,
  button:active {
    transform: scale(0.98) !important;
    transition: transform 0.1s ease !important;
  }
  
  /* Improve modal positioning */
  .modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: rgba(0, 0, 0, 0.5) !important;
    z-index: 1000 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 1rem !important;
  }
  
  /* Better card layouts */
  .card {
    background: white !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: var(--radius-lg) !important;
    padding: 1rem !important;
    margin-bottom: 1rem !important;
    color: #1e293b !important;
  }
  
  /* Improved table responsiveness */
  table {
    width: 100% !important;
    border-collapse: collapse !important;
    background: white !important;
  }
  
  th,
  td {
    padding: 0.75rem !important;
    border: 1px solid #e2e8f0 !important;
    color: #1e293b !important;
  }
  
  /* Better spacing for lists */
  ul,
  ol {
    padding-left: 1.5rem !important;
  }
  
  li {
    margin-bottom: 0.5rem !important;
    color: #1e293b !important;
  }
}

/* Small mobile specific improvements */
@media (max-width: 480px) {
  /* Tighter layouts */
  .container {
    padding: 0.75rem !important;
  }
  
  /* Smaller text for space-constrained layouts */
  body {
    font-size: 0.875rem !important;
  }
  
  /* Stack elements vertically */
  .flex-row {
    flex-direction: column !important;
    gap: 0.75rem !important;
  }
  
  /* Better form layouts */
  .form-group {
    margin-bottom: 1rem !important;
  }
  
  .form-group label {
    font-size: 0.875rem !important;
    color: #374151 !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
  }
}

/* Extra small devices */
@media (max-width: 360px) {
  /* Ultra-compact layout */
  .container {
    padding: 0.5rem !important;
  }
  
  body {
    font-size: 0.8125rem !important;
  }
  
  h1 {
    font-size: 1.5rem !important;
  }
  
  h2 {
    font-size: 1.25rem !important;
  }
  
  h3 {
    font-size: 1.125rem !important;
  }
  
  /* Reduce button padding */
  .btn {
    padding: 0.5rem 0.75rem !important;
    font-size: 0.8125rem !important;
    min-height: 40px !important;
  }
}

/* Landscape orientation optimizations */
@media (orientation: landscape) and (max-height: 600px) {
  /* Compact header for landscape */
  .nav-container {
    padding: 0.5rem 1rem !important;
  }
  
  .page-header {
    margin-bottom: 1rem !important;
  }
  
  .modal-content {
    max-height: 90vh !important;
  }
}

/* High DPI mobile screens */
@media (-webkit-min-device-pixel-ratio: 2) and (max-width: 768px) {
  /* Crisp borders and shadows */
  .btn,
  .card,
  input,
  select,
  textarea {
    border-width: 0.5px !important;
  }
  
  .card {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
  }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) and (max-width: 768px) {
  /* Fix iOS input zoom */
  input[type="email"],
  input[type="password"],
  input[type="text"],
  textarea {
    font-size: 16px !important;
  }
  
  /* Fix iOS sticky positioning */
  .nav-container {
    position: -webkit-sticky !important;
    position: sticky !important;
  }
  
  /* Improve touch scrolling */
  body {
    -webkit-overflow-scrolling: touch !important;
  }
}

/* Android browser fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) and (max-width: 768px) {
  /* Fix select dropdowns */
  select {
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23667eea' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") !important;
    background-repeat: no-repeat !important;
    background-position: right 0.75rem center !important;
    background-size: 0.75rem !important;
    padding-right: 2.5rem !important;
  }
}

/* Print styles optimization */
@media print {
  /* Hide mobile-specific elements */
  .mobile-menu-toggle,
  .mobile-menu-backdrop,
  .nav-menu.mobile-open {
    display: none !important;
  }
  
  /* Expand content for print */
  .nav-menu {
    position: static !important;
    width: auto !important;
    height: auto !important;
    background: transparent !important;
    box-shadow: none !important;
  }
  
  /* Reset mobile modal styles for print */
  .modal {
    position: static !important;
    max-width: 100% !important;
    max-height: none !important;
    box-shadow: none !important;
    border: 1px solid #000 !important;
  }
}

/* ================================================================
 * COMPREHENSIVE MOBILE BUTTON FIXES
 * ================================================================ */

/* Global button improvements for mobile */
@media (max-width: 768px) {
  /* Reset and improve all buttons */
  button,
  .btn,
  input[type="button"],
  input[type="submit"] {
    min-height: 48px !important;
    padding: 0.75rem 1.25rem !important;
    font-size: 1rem !important;
    border-radius: 8px !important;
    border: 2px solid transparent !important;
    background: #3b82f6 !important;
    color: white !important;
    font-weight: 600 !important;
    cursor: pointer !important;
    touch-action: manipulation !important;
    -webkit-appearance: none !important;
    appearance: none !important;
    outline: none !important;
    transition: all 0.2s ease !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.5rem !important;
    text-align: center !important;
    line-height: 1.4 !important;
    box-sizing: border-box !important;
  }
  
  /* Primary button styles */
  .btn-primary,
  button[type="submit"] {
    background: #3b82f6 !important;
    border-color: #3b82f6 !important;
    color: white !important;
  }
  
  .btn-primary:hover,
  .btn-primary:focus {
    background: #2563eb !important;
    border-color: #2563eb !important;
    transform: translateY(-1px) !important;
  }
  
  /* Secondary button styles */
  .btn-secondary {
    background: white !important;
    border-color: #d1d5db !important;
    color: #374151 !important;
  }
  
  .btn-secondary:hover,
  .btn-secondary:focus {
    background: #f9fafb !important;
    border-color: #9ca3af !important;
  }
  
  /* Danger button styles */
  .btn-danger {
    background: #dc2626 !important;
    border-color: #dc2626 !important;
    color: white !important;
  }
  
  .btn-danger:hover,
  .btn-danger:focus {
    background: #b91c1c !important;
    border-color: #b91c1c !important;
  }
  
  /* Link buttons */
  .btn-link {
    background: transparent !important;
    border: none !important;
    color: #3b82f6 !important;
    text-decoration: underline !important;
    min-height: 44px !important;
    padding: 0.5rem 1rem !important;
  }
  
  .btn-link:hover,
  .btn-link:focus {
    color: #2563eb !important;
    background: #eff6ff !important;
  }
  
  /* Disabled state */
  button:disabled,
  .btn:disabled {
    opacity: 0.6 !important;
    cursor: not-allowed !important;
    transform: none !important;
  }
  
  /* Loading state */
  .btn.loading {
    position: relative !important;
    color: transparent !important;
  }
  
  .btn.loading::after {
    content: '' !important;
    position: absolute !important;
    width: 16px !important;
    height: 16px !important;
    border: 2px solid transparent !important;
    border-top: 2px solid currentColor !important;
    border-radius: 50% !important;
    animation: spin 1s linear infinite !important;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
}

/* ================================================================
 * COMPREHENSIVE MOBILE FORM FIXES
 * ================================================================ */

@media (max-width: 768px) {
  /* Fix all form groups */
  .form-group {
    margin-bottom: 1.5rem !important;
    width: 100% !important;
    position: relative !important;
  }
  
  .form-group label {
    display: block !important;
    margin-bottom: 0.5rem !important;
    font-weight: 600 !important;
    color: #374151 !important;
    font-size: 0.875rem !important;
  }
  
  /* Fix all input types */
  input,
  textarea,
  select {
    width: 100% !important;
    min-height: 48px !important;
    padding: 0.75rem 1rem !important;
    font-size: 16px !important; /* Prevents zoom */
    border: 2px solid #d1d5db !important;
    border-radius: 8px !important;
    background: white !important;
    color: #1f2937 !important;
    box-sizing: border-box !important;
    touch-action: manipulation !important;
    -webkit-appearance: none !important;
    appearance: none !important;
    outline: none !important;
  }
  
  input:focus,
  textarea:focus,
  select:focus {
    border-color: #3b82f6 !important;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
  }
  
  /* Fix textarea specific issues */
  textarea {
    min-height: 120px !important;
    resize: vertical !important;
    line-height: 1.5 !important;
  }
  
  /* Fix select dropdowns */
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e") !important;
    background-position: right 0.75rem center !important;
    background-repeat: no-repeat !important;
    background-size: 1.25rem !important;
    padding-right: 3rem !important;
  }
  
  /* Fix form rows and columns */
  .form-row {
    display: block !important;
    width: 100% !important;
  }
  
  .form-col {
    width: 100% !important;
    margin-bottom: 1rem !important;
  }
  
  /* Fix form validation states */
  .form-group.error input,
  .form-group.error textarea,
  .form-group.error select {
    border-color: #dc2626 !important;
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;
  }
  
  .form-group.success input,
  .form-group.success textarea,
  .form-group.success select {
    border-color: #10b981 !important;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
  }
  
  /* Error and help text */
  .error-text,
  .help-text {
    font-size: 0.875rem !important;
    margin-top: 0.5rem !important;
    line-height: 1.4 !important;
  }
  
  .error-text {
    color: #dc2626 !important;
  }
  
  .help-text {
    color: #6b7280 !important;
  }
}
